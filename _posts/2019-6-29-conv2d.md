---
layout: post
comments: true
mathjax: true
title: 3.2| Convolución en 2D(Filtrado espacial)
--- 
Anteriormente en los casos de la sección 2 de este blog, utilizabamos funciones de mapeo para mejorar el contraste, estas funciones las podemos imaginar como una _tabla de casos_ en la que en la entrada solo utilizamos __un solo pixel__ para generar una salida correspondiente. Es decir, tu llevabas tus $5 pesitos ($$f(x,y)$$) y el señor de la tienda ($$T$$) te daba un cubito de rikoPollo ($$g(x,y)$$).

En esta ocasión veremos la técnica de _convolución_, en el que a diferencia de los casos anteriores, aquí se trabaja sobre una _vecindad_ de valores. Imagina que estas con tus compas y hacen una cooperacha para comprar una pizza (si eres de Rioverde, prueba las tiki pizza, las descubrí hoy domingo (2x1) y totally worth it), para escoger el sabor harán un consenso, en donde aquellos que hayan puesto más dinerou, serán los que tendrán _más peso_ en la toma de decisión. Pues algo así pasa con este procedimiento, en el post [anterior](https://bryanmed.github.io/Convoluci%C3%B3n/) hablamos acerca de la convolución de señales, y ya es tiempo de dar salto a las imágenes. Para empezar, veamos como está definida la convolución 2D discreta: 

$$g[x, y] = \sum_{s = -a}^{a} \sum_{t = -b}^{b} w[s, t]f[x + s, y + t]$$

Y ahora vamos a desmenusarla:

* $$g[x, y]$$ se refiere al resultado de la convolución en la posición $$x, y$$

Ahora atenti, nos topamos ahora con dos sumatorias, que van desde $$-a$$ hasta $$a$$, y de $$-b$$ a $$b$$, pues bueno, estos índices se 

Ahora trabajaremos en 2 dimensiones, con lo cual, los ingredientes necesarios para realizar la extensión de la convolución en el espacio bidimensioanl queda de la siguiente manera: 

* La imagen de entrada $$f[x, y]$$
* El _filtro_, _mask_, _kernel_ $$w[x, y]$$, el cual es el análogo a la respuesta al impulso ($$h[n]$$), si bien podemos escoger el tamaño de la __matriz__ como queramos, es recomendable utilizar ventanas de tamaño impar, debido a que cuentan con un centro real.

En la __Figura 3.1__ se observa la composición tanto de la imagen como del filtro. En la imagen de entrada, usualmente se considera su origen en la esquina superior izquierda. Por otro lado, el origen del kernel se encuentra en el centro de este (por eso es preferible utilizarlos de tamaño impar).

Bueno, la convolución en imágenes está definido por la formula:

{: .center}
$$g[x, y] = \sum_{s = -a}^{a} \sum_{t = -b}^{b} w[s, t]f[x + s, y + t]$$

Este proceso alinea 


Lo que nos dice esta operación es que para obtener el resultado de la convolución en el punto $$x, y$$, 

_multiplicaremos_ cada elemento del kernel con el pixel correspondiente de la imagen 
